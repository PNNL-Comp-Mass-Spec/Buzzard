<UserControl x:Class="BuzzardWPF.Windows.WatcherControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
			 xmlns:sys="clr-namespace:System;assembly=mscorlib"
			 xmlns:sysIO="clr-namespace:System.IO;assembly=mscorlib"
			 xmlns:toolKit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
			 xmlns:converters="clr-namespace:BuzzardLib.Converters;assembly=BuzzardLib"
			 xmlns:windows="clr-namespace:BuzzardWPF.Windows"
			 mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="800"
			 Background="{x:Null}">
	<UserControl.Resources>
		<converters:BoolToObjectConverter x:Key="MontitorButtonContentConverter"
										  FalseContent="Monitor"
										  TrueContent="Stop"/>
		<converters:InvertBoolConverter x:Key="InvertBoolConverter"/>
		
		<Style TargetType="TextBlock">
			<Setter Property="FontSize"		Value="15"/>
			<Setter Property="Margin"		Value="1,2,2,2"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
		</Style>
		<Style TargetType="Button">
			<Setter Property="MinHeight"	Value="32"/>
			<Setter Property="MinWidth"		Value="95"/>
			<Setter Property="FontSize"		Value="16"/>
		</Style>
		
		<ObjectDataProvider x:Key="SearchTypeSource" 
							MethodName="GetValues"
							ObjectType="{x:Type sys:Enum}">
			<ObjectDataProvider.MethodParameters>
				<x:Type TypeName="sysIO:SearchOption"/>
			</ObjectDataProvider.MethodParameters>
		</ObjectDataProvider>
	</UserControl.Resources>
    <Grid>
		<Grid.RowDefinitions>
            
            
			<RowDefinition Height="auto"/>
			<RowDefinition Height="auto"/>
			<RowDefinition Height="auto"/>
			<RowDefinition Height="auto"/>
			<RowDefinition Height="auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="64"/>
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>

            <ColumnDefinition Width="164"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="140"/>
		</Grid.ColumnDefinitions>
		
		<Label Grid.Row="0" Grid.Column="0"
				   Margin="1,1,2,2"
                  IsEnabled="{Binding Path=IsNotMonitoring}"
                   HorizontalAlignment="Left" 
			       VerticalAlignment="Center" 
			       VerticalContentAlignment="Center"
			       MinWidth="32"
			       FontSize="16"
				   Content="Watch for files in..."/>
		<TextBlock Grid.Row="2" Grid.Column="2"
				   Text="Search Type"/>
		
		<toolKit:AutoCompleteBox x:Name="m_autoFillDirectorySelector"
								 Text="{Binding Path=DirectoryToWatch, Mode=TwoWay,
                                            RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, UpdateSourceTrigger=PropertyChanged}"
								 Grid.Row="0" 
                                 IsEnabled="{Binding Path=IsNotMonitoring}"
                                 Grid.Column="1"
								 Grid.ColumnSpan="4"
								 Margin="5"
								 FontSize="16"
                                 VerticalContentAlignment="Center"
							     VerticalAlignment="Center"							     
							     MinHeight="32"							
								 Populating="AutoFillDirectorySelector_Populating"/>
        <Button Grid.Row="0" 
                Grid.Column="5"
				x:Name="m_dialogButton"
				Content="..."                            
                Height="32"
                  IsEnabled="{Binding Path=IsNotMonitoring}"
		        Style="{StaticResource SimpleButtonStyle}"
				Click="SelectDirectory_Click" />
        <Label Content="...that end with"                 
			   Name="m_extensionLabel"        
                  IsEnabled="{Binding Path=IsNotMonitoring}"     
			   Grid.Row="2"
			   Grid.RowSpan="1"
			   Grid.Column="0"
			   Grid.ColumnSpan="1"                
			   HorizontalAlignment="Left" 
			   VerticalAlignment="Center" 
			   FontSize="16" />
        <Label 
            Name="m_searchOptionLabel" 
            Content="...and check..."         
                  IsEnabled="{Binding Path=IsNotMonitoring}"    
            Grid.Row="1"
            Grid.Column="0"            
            FontSize="16" 
            HorizontalAlignment="Left" 
            VerticalAlignment="Center"/>
        <TextBox                  
				 Grid.Row="2" Grid.Column="1"
				 Grid.RowSpan="1"
				 Grid.ColumnSpan="2" 
                Margin="5"
                  IsEnabled="{Binding Path=IsNotMonitoring}"    
				 VerticalAlignment="Center"
				 VerticalContentAlignment="Center"
				 MinHeight="32"
				 FontSize="15"
				 Text="{Binding Path=Extension, Mode=TwoWay,
                                            RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, UpdateSourceTrigger=PropertyChanged}"/>
        <ComboBox Grid.Row="1" Grid.Column="1"
				  Grid.ColumnSpan="2"
                  IsEnabled="{Binding Path=IsNotMonitoring}"
				  x:Name="m_dropDown"
				  SelectedItem="{Binding Path=WatchDepth, Mode=TwoWay,
                                            RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, UpdateSourceTrigger=PropertyChanged}"
				  ItemsSource="{Binding Source={StaticResource SearchTypeSource}}"
				  MinHeight="32"
				  Margin="5"/>
		
        <Button Grid.Row="6" 
                Grid.Column="5"	
                Height="48"
                BorderBrush="Red"
		        Style="{StaticResource SimpleButtonStyle}"
				Click="MonitorStartStop_Click">
            <DockPanel Height="32" Width="128">                                    
                <Label 
                    DockPanel.Dock="Right"
                    Margin="0,0,5,0"
                    VerticalContentAlignment="Center"                    
                    Content="{Binding Path=IsWatching, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource MontitorButtonContentConverter}}"/>
                <Image 
                        DockPanel.Dock="Left"
                        Source="{Binding Path=Monitor, 
									Mode=OneWay,                         
									UpdateSourceTrigger=PropertyChanged, 
									FallbackValue={StaticResource Monitor}}"/>
            </DockPanel>
        </Button>


        <Label Grid.Row="3" Grid.Column="0"
               FontSize="16"
               VerticalAlignment="Center"
                  IsEnabled="{Binding Path=IsNotMonitoring}"
				                Content="Minimum File Size (Kb)"/>

        <xctk:IntegerUpDown Grid.Row="3" 
                            Grid.Column="1"
							        DefaultValue="100"
							        Value="{Binding Path=MinimumFileSize, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                            
							        MinHeight="32"
                                    MaxHeight="32"
							        Margin="5"
                  IsEnabled="{Binding Path=IsNotMonitoring}"
                                    HorizontalContentAlignment="Center"
							        Increment="1"
							        Minimum="0"
							        Maximum="99999"
							        FormatString="N0"/>        
        <xctk:IntegerUpDown Grid.Row="4" 
                            Grid.Column="1"
							        DefaultValue="5"
							        Value="{Binding Path=WaitTime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
							        MinHeight="32"
							        Margin="5"
							        Increment="1"
                  IsEnabled="{Binding Path=IsNotMonitoring}"
                                    HorizontalContentAlignment="Center"
							        Minimum="0"
							        Maximum="600"
							        FormatString="N0"/>

        <Label Grid.Row="4" Grid.Column="0"                      
                    IsEnabled="{Binding Path=IsNotMonitoring}"
                    Content="Minutes To Wait: "/>
        
        <CheckBox Grid.Row="6" 
                  Grid.Column="0"
                  Margin="5"
				  VerticalAlignment="Center"
				  Content="Create trigger file when DMS request not found"
				  FontSize="15" 
                  IsEnabled="{Binding Path=IsNotMonitoring}"
                  Grid.ColumnSpan="3"
				  ToolTip="Do you want the watcher to auto-create the trigger file for datasets it finds when their DMS is unresolved?"
				  IsChecked="{Binding Path=CreateTriggerOnDMSFail, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
		
    </Grid>
</UserControl>
