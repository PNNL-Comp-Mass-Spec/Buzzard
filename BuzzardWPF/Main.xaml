<Window x:Class="BuzzardWPF.Main"
		Title="Buzzard"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"    
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:local="clr-namespace:BuzzardWPF.Data"
			 xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
		xmlns:windows="clr-namespace:BuzzardWPF.Windows"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
		xmlns:my="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
			 xmlns:converters="clr-namespace:BuzzardWPF.Converters"
		mc:Ignorable="d" 
		Width="1200" Height="800"
		MinWidth="785"
		MinHeight="550"
		Icon="Resources/IconImage.ico"
		UseLayoutRounding="True"
		SnapsToDevicePixels="True"
		WindowStartupLocation="CenterScreen">
    
    <!-- Resources -->
    <Window.Resources>
        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="MinHeight"				Value="32"/>
            <Setter Property="Margin"					Value="2"/>
            <Setter Property="MinWidth"					Value="300"/>
            <Setter Property="FontSize"					Value="15"/>
            <Setter Property="VerticalAlignment"		Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style x:Key="TextBlockStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Calibri"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="20 10"/>
        </Style>
        <BitmapImage x:Key="BuzzardSource" UriSource="Resources\Buzzards.png" />
        
        <converters:BoolToObjectConverter x:Key="MontitorButtonContentConverter"
										  FalseContent="Monitor"
										  TrueContent="Stop"/>
            <converters:InvertBoolConverter x:Key="InvertBoolConverter"/>

            <Style TargetType="TextBlock">
                <Setter Property="FontSize"		Value="15"/>
                <Setter Property="Margin"		Value="1,2,2,2"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
            </Style>
            <Style TargetType="Button">
                <Setter Property="MinHeight"	Value="32"/>
                <Setter Property="MinWidth"		Value="95"/>
                <Setter Property="FontSize"		Value="16"/>
            </Style>
            <Style TargetType="TabItem">
			<Setter Property="MinWidth" Value="75"/>
			<Setter Property="MinHeight" Value="25"/>
		</Style>
    </Window.Resources>

    <!-- UI Elements -->
    <DockPanel VerticalAlignment="Stretch">
        <StatusBar Name="m_statusBar" 
                   Height="50" 
                   DockPanel.Dock="Bottom">
			<Button Click="TurnAnimationOnOrOff_Click"
					Margin="2"
					Background="Transparent"
					BorderBrush="Transparent"
					BorderThickness="0"
					Focusable="False">
				<Image Source="{Binding Path=CurrentImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
					   Stretch="Uniform"/>
			</Button>
			<Label Content="{Binding Path=LastStatusMessage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
        </StatusBar>
		
        <Grid VerticalAlignment="Stretch">           
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" MinHeight="400"/>
                <RowDefinition Height="6*" />
            </Grid.RowDefinitions>
			
			<TabControl 
                        FontSize="24"
                        Grid.Row="0"
						Margin="5,5,5,5"
						TabStripPlacement="Left">
                <TabControl.Background>                    
                        <ImageBrush 
                                    Stretch="None"
                                    AlignmentX="Left"
                                    AlignmentY="Bottom"
                                    ImageSource="{Binding   Path=Buzzard, 
				                                            Mode=OneWay, 
									                        UpdateSourceTrigger=PropertyChanged, 
									                        FallbackValue={StaticResource Buzzard}}"/>
                    
                </TabControl.Background>
				<TabItem 
                    Height="64"
                    Style="{DynamicResource ResourceKey=SimpleTabItem}" >
                    <TabItem.Header>
                        <DockPanel>
                            <Image 
                                Margin="5"
                                DockPanel.Dock="Left"
                                Stretch="None"
                                Source="{Binding Path=Monitor, 
									        Mode=OneWay,                         
									        UpdateSourceTrigger=PropertyChanged, 
									        FallbackValue={StaticResource SearchKey}}"/>
                            <Label
                                VerticalContentAlignment="Center">
                                Search</Label>
                        </DockPanel>
                    </TabItem.Header>
                    <TabControl>
                        <TabItem Header="Search" 
                            Padding="5">
                            <windows:SearchConfigView x:Name="m_searchWindow"/>
                        </TabItem>
                    </TabControl>
                </TabItem>
				<TabItem              
                    Height="64"
                    Style="{DynamicResource ResourceKey=SimpleTabItem}">
                    <TabItem.Header>
                        <DockPanel>
                            <Image 
                                Margin="5"
                                DockPanel.Dock="Left"
                                Stretch="None"
                                Source="{Binding Path=Monitor, 
									        Mode=OneWay,                         
									        UpdateSourceTrigger=PropertyChanged, 
									        FallbackValue={StaticResource Collect}}"/>
                            <Label
                                VerticalContentAlignment="Center">
                                Monitor</Label>
                        </DockPanel>
                    </TabItem.Header>
                    <TabControl 			
						TabStripPlacement="Top">
                        <TabItem 
                            Padding="5"
                            Header="Monitor">
                            <windows:WatcherControl x:Name="m_scanWindow"/>
                        </TabItem>
                        <TabItem 
                            Padding="5"
                            Header="Instrument Metadata">
                            <windows:WatcherConfig x:Name="m_scanConfigWindow"/>
                        </TabItem>
                        <TabItem  
                            Padding="5"
                            Header="QC Samples">
                            <windows:QCView x:Name="m_qcConfigWindow"/>
                        </TabItem>                        
                    </TabControl>
				</TabItem>
                <TabItem 
                    Height="64"
                    Style="{DynamicResource ResourceKey=SimpleTabItem}">
                    <TabItem.Header>
                        <DockPanel>
                            <Image 
                                DockPanel.Dock="Left"
                                Margin="5"
                                Stretch="None"
                                Source="{Binding Path=Monitor, 
									        Mode=OneWay,                         
									        UpdateSourceTrigger=PropertyChanged, 
									        FallbackValue={StaticResource Tools}}"/>
                            <Label
                                VerticalContentAlignment="Center">
                                Configure</Label>
                        </DockPanel>
                    </TabItem.Header>
                    <TabControl>
                        <TabItem Header="Trigger Files" 
                            Padding="5">
                            <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="197*" />
                        </Grid.RowDefinitions>
                        <TextBlock Text="Remote Folder Location"
							           Grid.Row="0" Grid.Column="0"
							           Style="{StaticResource TextBlockStyle}"/>
                        <TextBox Grid.Row="0" 
                                 Grid.Column="1"
                                 Margin="5"
							         Text="{Binding Path=TriggerFileLocation, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
							         Style="{StaticResource TextBoxStyle}"/>
                                <Button Grid.Row="0" Grid.Column="2"
							        Content="..."
							        Click="SelectTriggerFileLocation_Click"
							        HorizontalAlignment="Right"
							        Style="{StaticResource SimpleButtonStyle}"/>
                                <Button Grid.Row="1" Grid.Column="2"
							        Content="Reload DMS Cache"
							        Click="ForceDmsReload_Click"
							        HorizontalAlignment="Right"
							        Style="{StaticResource SimpleButtonStyle}"/>
                            </Grid>
                        </TabItem>
                    </TabControl>
                </TabItem>
            </TabControl>
                       
            <windows:BuzzardGrid x:Name="m_dataGrid"
								 Grid.Row="1"/>
        </Grid>
    </DockPanel>
</Window>
