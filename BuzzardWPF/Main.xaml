<Window x:Class="BuzzardWPF.Main"
		Title="Buzzard"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"    
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
		xmlns:windows="clr-namespace:BuzzardWPF.Windows"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
		xmlns:my="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
			 xmlns:converters="clr-namespace:BuzzardLib.Converters;assembly=BuzzardLib"
		mc:Ignorable="d" 
		Width="1200" Height="800"
		MinWidth="785"
		MinHeight="550"
		Icon="Resources/IconImage.ico"
		UseLayoutRounding="True"
		SnapsToDevicePixels="True"
		WindowStartupLocation="CenterScreen">

    <!-- Resources -->
    <Window.Resources>
        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="MinHeight"				Value="32"/>
            <Setter Property="Margin"					Value="2"/>
            <Setter Property="MinWidth"					Value="300"/>
            <Setter Property="FontSize"					Value="15"/>
            <Setter Property="VerticalAlignment"		Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style x:Key="TextBlockStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Calibri"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="20 10"/>
        </Style>
        <BitmapImage x:Key="BuzzardSource" UriSource="Resources\Buzzards.png" />

        <converters:BoolToObjectConverter x:Key="MontitorButtonContentConverter"
										  FalseContent="Monitor"
										  TrueContent="Stop"/>
        <converters:InvertBoolConverter x:Key="InvertBoolConverter"/>

        <Style TargetType="TextBlock">
            <Setter Property="FontSize"		Value="15"/>
            <Setter Property="Margin"		Value="1,2,2,2"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="MinHeight"	Value="32"/>
            <Setter Property="MinWidth"		Value="95"/>
            <Setter Property="FontSize"		Value="16"/>
        </Style>
        <Style TargetType="TabItem">
            <Setter Property="MinWidth" Value="75"/>
            <Setter Property="MinHeight" Value="25"/>
        </Style>
    </Window.Resources>

    <!-- UI Elements -->
    <Grid VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="32"/>
        </Grid.RowDefinitions>
        <Grid            
            Grid.Row="0"
            >
            <Label 
					Margin="2"
					BorderBrush="Transparent"
					BorderThickness="0"
                    Height="64"
                    HorizontalContentAlignment="Center"
                    FontSize="32"
                    Foreground="LightGray"                    
					Focusable="False" >
                <Label.Background>
                    <VisualBrush TileMode="Tile" Viewport="0,0,310,64" ViewportUnits="Absolute">
                        <VisualBrush.Visual>
                            <Image Source="{Binding Path=CurrentImage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" OpacityMask="Black"/>
                        </VisualBrush.Visual>
                    </VisualBrush>
                </Label.Background>
            </Label>
            <Label 
					Margin="2"
					BorderBrush="Transparent"
					BorderThickness="0"
                    Height="64"
                    HorizontalContentAlignment="Center"
                    FontSize="32"
                
                    Foreground="LightGray"
                    
					Focusable="False" FontFamily="Showcard Gothic" RenderTransformOrigin="0.5,0.5" FontWeight="Bold">
                <Label.OpacityMask>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="Black" Offset="0.24"/>
                        <GradientStop Color="#FFB4B4B4" Offset="0.798"/>
                        <GradientStop Color="#FFB4B4B4" Offset="1"/>
                    </LinearGradientBrush>
                </Label.OpacityMask>
                <Label.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform Angle="-4.764"/>
                        <TranslateTransform/>
                    </TransformGroup>
                </Label.RenderTransform>
                <Label.Content>
                    Buzzard
                </Label.Content>
            </Label>
        </Grid>

        <Grid VerticalAlignment="Stretch"                         
            Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" MinHeight="250"/>
                <RowDefinition Height="3" />
                <RowDefinition Height="6*" />
            </Grid.RowDefinitions>

            <TabControl 
                        FontSize="24"
                        Grid.Row="0"
						Margin="5,5,5,5"
						TabStripPlacement="Left">
                <TabControl.Background>
                    <ImageBrush 
                                    Stretch="None"
                                    AlignmentX="Left"
                                    AlignmentY="Bottom"
                                    ImageSource="{Binding   Path=Buzzard, 
				                                            Mode=OneWay, 
									                        UpdateSourceTrigger=PropertyChanged, 
									                        FallbackValue={StaticResource Buzzard}}"/>

                </TabControl.Background>
                <TabItem 
                    Height="64"
                    Style="{DynamicResource ResourceKey=SimpleTabItem}" >
                    <TabItem.Header>
                        <DockPanel>
                            <Image 
                                Margin="5"
                                DockPanel.Dock="Left"
                                Stretch="None"
                                Source="{Binding Path=Monitor, 
									        Mode=OneWay,                         
									        UpdateSourceTrigger=PropertyChanged, 
									        FallbackValue={StaticResource SearchKey}}"/>
                            <Label
                                VerticalContentAlignment="Center" FontFamily="Arial">
                                Search</Label>
                        </DockPanel>
                    </TabItem.Header>
                    <TabControl>
                        <TabItem Header="Search" 
                            Padding="5" FontFamily="Calibri">
                            <windows:SearchConfigView x:Name="m_searchWindow"/>
                        </TabItem>
                    </TabControl>
                </TabItem>
                <TabItem              
                    Height="64"
                    Style="{DynamicResource ResourceKey=SimpleTabItem}">
                    <TabItem.Header>
                        <DockPanel>
                            <Image 
                                Margin="5"
                                DockPanel.Dock="Left"
                                Stretch="None"
                                Source="{Binding Path=Monitor, 
									        Mode=OneWay,                         
									        UpdateSourceTrigger=PropertyChanged, 
									        FallbackValue={StaticResource Collect}}"/>
                            <Label
                                VerticalContentAlignment="Center" FontFamily="Arial">
                                Monitor</Label>
                        </DockPanel>
                    </TabItem.Header>
                    <TabControl 			
						TabStripPlacement="Top">
                        <TabItem 
                            Padding="5"
                            Header="Monitor" FontFamily="Calibri" FontSize="14">
                            <windows:WatcherControl x:Name="m_scanWindow"/>
                        </TabItem>
                        <TabItem 
                            Padding="5"
                            IsEnabled="{Binding Path=IsNotMonitoring}"    
                            Header="Instrument Metadata" FontFamily="Calibri">
                            <windows:WatcherConfig x:Name="m_scanConfigWindow"/>
                        </TabItem>
                        <TabItem  
                            IsEnabled="{Binding Path=IsNotMonitoring}"    
                            Padding="5"
                            Header="QC Samples" FontFamily="Calibri">
                            <windows:QCView x:Name="m_qcConfigWindow"/>
                        </TabItem>
                    </TabControl>
                </TabItem>
                <TabItem 
                    Height="64"
                    Style="{DynamicResource ResourceKey=SimpleTabItem}">
                    <TabItem.Header>
                        <DockPanel>
                            <Image 
                                DockPanel.Dock="Left"
                                Margin="5"
                                Stretch="None"
                                Source="{Binding Path=Monitor, 
									        Mode=OneWay,                         
									        UpdateSourceTrigger=PropertyChanged, 
									        FallbackValue={StaticResource Tools}}"/>
                            <Label
                                VerticalContentAlignment="Center" FontFamily="Arial">
                                Configure</Label>
                        </DockPanel>
                    </TabItem.Header>
                    <TabControl>
                        <TabItem Header="Trigger Files" 
                            Padding="5" FontFamily="Calibri">
                            <Grid Margin="0,0,0.2,0.4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="136.8" />
                                    <ColumnDefinition Width="143.2"/>
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto" MinHeight="40"/>
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <TextBlock Text="Remote Folder Location"
							           Grid.Row="0" Grid.Column="0"
							           Style="{StaticResource TextBlockStyle}" Margin="20,12,20.2,11.6" Height="18" Width="135"/>
                                <TextBox Grid.Row="0" 
                                 Grid.Column="1"
                                 Margin="4.8,5,10.2,4.6"
							         Text="{Binding Path=TriggerFileLocation, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
							         Style="{StaticResource TextBoxStyle}" IsEnabled="False" Height="32"/>
                                <Button Grid.Row="0" Grid.Column="2"
							        Content="Use default"
							        Click="UseDefaultTriggerFileLocation_Click"
							        HorizontalAlignment="Center"
							        Style="{StaticResource SimpleButtonStyle}" FontFamily="Calibri" Width="124" Margin="5.8,5,7,0"/>
                                <Button Grid.Row="0" Grid.Column="3"
							        Content="Select folder ..."
							        Click="SelectTriggerFileLocation_Click"
							        HorizontalAlignment="Right"
							        Style="{StaticResource SimpleButtonStyle}" FontFamily="Calibri" Width="132" Margin="0,5,5.2,0"/>
                                <Button Grid.Row="1" Grid.Column="2"
							        Content="Reload DMS Cache"
							        Click="ForceDmsReload_Click"
							        HorizontalAlignment="Center"
							        Style="{StaticResource SimpleButtonStyle}" FontFamily="Calibri" Margin="5.8,0.4,6,0" Grid.RowSpan="3" Width="125" VerticalAlignment="Center"/>
                                <Label
                                    Grid.Row="1"
                                    Foreground="Gray"
                                    Content="{Binding LastUpdated}" Grid.ColumnSpan="2" Margin="175,0.4,10.2,1.6" Grid.RowSpan="3"
                                    />
                            </Grid>
                        </TabItem>
                    </TabControl>
                </TabItem>
            </TabControl>
            <GridSplitter HorizontalAlignment="Stretch" Grid.Row="1" Background="Gray" Height="3"/>
            <windows:BuzzardGrid x:Name="m_dataGrid"
								 Grid.Row="2"/>
        </Grid>

        <StatusBar Name="m_statusBar" 
                   Height="32" 
                   Grid.Row="2">
            <Label Content="{Binding Path=LastStatusMessage, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
        </StatusBar>
    </Grid>
</Window>
